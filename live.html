<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Live результати — STOLAR CARP</title>

  <link rel="stylesheet" href="assets/css/main.css">
  <script defer src="assets/js/config.js"></script>

  <style>
    .live-header{display:flex;flex-direction:column;gap:6px;margin-bottom:18px;}
    .live-kicker{display:inline-flex;align-items:center;gap:6px;font-size:12px;text-transform:uppercase;letter-spacing:.12em;color:#fcd34d;background:rgba(252,211,77,.08);border-radius:999px;padding:4px 10px;border:1px solid rgba(252,211,77,.35);width:fit-content;}
    .live-dot{width:8px;height:8px;border-radius:50%;background:#ef4444;box-shadow:0 0 10px rgba(239,68,68,.9);}
    .title-gradient{background:linear-gradient(90deg,#f6c34c 0%,#cc6a2b 35%,#7a0f2b 100%);-webkit-background-clip:text;background-clip:text;color:transparent;}
    .live-stage-pill{display:inline-flex;align-items:center;gap:8px;font-size:13px;color:var(--muted);}
    .live-stage-pill span{padding:4px 10px;border-radius:999px;border:1px solid #262636;background:#0d0d14;font-size:12px;}

    .live-layout{display:grid;grid-template-columns:1fr;gap:18px;}
    @media (min-width: 980px){
      .live-layout{grid-template-columns: 2fr 1.25fr;}
    }

    .live-zones-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;}
    @media (max-width: 980px){ .live-zones-grid{grid-template-columns:1fr;} }

    .live-zone-title{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px;}
    .live-zone-title span.badge{font-size:11px;padding:3px 8px;}

    .table-sm{font-size:12.5px;}
    .table-sm th,.table-sm td{padding:6px 8px;white-space:nowrap;}
    .table-sm td.team-col{max-width:220px;white-space:normal;}
    .live-note{font-size:12px;color:var(--muted);margin-top:6px;}

    .bf-toggle{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px;}
    .bf-toggle .btn{padding:10px 12px;border-radius:12px;}

    /* BigFish Total block hide/show */
    .bf-wrap{display:none;}
    .bf-wrap.is-open{display:block;}

    /* Small helper badge */
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(148,163,184,.25);
      background:rgba(2,6,23,.35);
      color:#cbd5e1;font-size:12px;
    }

    .bigfish-row--max{background:rgba(250,204,21,0.08);}
  </style>
</head>

<body>

<header class="header">
  <div class="container header__row">
    <a class="logo" href="index.html">
      <span class="logo__mark">SC</span>
      <span class="logo__text">STOLAR CARP</span>
    </a>

    <nav class="nav" id="nav">
      <a href="/index.html" class="nav__link">Головна</a>
      <a href="/rules.html" class="nav__link">Регламент</a>
      <a href="/register.html" class="nav__link">Реєстрація</a>
      <a href="/live.html" class="nav__link">Live</a>
      <a href="/rating.html" class="nav__link">Рейтинг</a>
      <a href="/lakes.html" class="nav__link">Водойми</a>
      <a href="/sponsors.html" class="nav__link">Спонсори</a>
      <a href="/events/index.html" class="nav__link">Архів</a>
      <a href="/cabinet.html" class="nav__link">Мій кабінет</a>
    </nav>

    <button class="burger" id="burger"><span></span><span></span><span></span></button>
  </div>
</header>

<main class="main">
  <section class="container section">

    <div class="live-header">
      <div class="live-kicker">
        <span class="live-dot"></span>
        <span>Live протокол</span>
      </div>

      <h1 class="title-gradient" style="margin:4px 0 4px;font-size:clamp(26px,4.5vw,34px);">
        Результати активного етапу
      </h1>

      <div class="live-stage-pill">
        <span>Поточний етап: <strong id="liveStageName">—</strong></span>
      </div>

      <div class="bf-toggle">
        <button class="btn btn--accent" id="toggleBigFishBtn" type="button">BigFish Total</button>
        <span class="pill" id="liveUpdatedAt" title="Останнє оновлення">Оновлено: —</span>
      </div>

      <p class="lead" style="max-width:720px;margin:6px 0 0;">
        W = <b>к-сть / вага</b>. Таблиці оновлюються автоматично з Firebase.
      </p>
    </div>

    <div id="liveError" class="form-msg err" style="display:none;"></div>

    <div id="liveLoading" class="form__hint" style="margin-top:12px;">
      Завантаження результатів...
    </div>

    <div id="liveContent" class="live-layout" style="display:none;">

      <!-- LEFT -->
      <div class="live-left">
        <div class="card" style="margin-bottom:16px;">
          <h2 style="margin-top:0;margin-bottom:10px;">Зони A / B / C</h2>

          <div class="live-zones-grid" id="zonesContainer"></div>

          <p class="live-note">
            Сортування: вага → BIG. Місце — в межах зони.
          </p>
        </div>

        <div class="card">
          <h2 style="margin-top:0;margin-bottom:10px;">Загальна таблиця</h2>

          <div class="table-wrap" style="overflow-x:auto;">
            <table class="table table-sm" id="totalTable">
              <thead>
                <tr>
                  <th>№</th>
                  <th>Команда</th>
                  <th>Зона</th>
                  <th>W1</th>
                  <th>W2</th>
                  <th>W3</th>
                  <th>W4</th>
                  <th>Разом</th>
                  <th>BIG</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <p class="live-note">
            W = к-сть / вага (шт / кг). Місце — загальне (якщо записане), інакше “—”.
          </p>
        </div>
      </div>

      <!-- RIGHT: BigFish Total -->
      <div class="live-right">
        <div class="card bf-wrap" id="bigFishWrap">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;">
            <h2 style="margin:0;">BigFish — Total</h2>
            <span class="pill" id="bfCount">Учасників: —</span>
          </div>

          <div class="table-wrap" style="overflow-x:auto;margin-top:10px;">
            <table class="table table-sm" id="bigFishTable">
              <thead>
                <tr>
                  <th>Команда</th>
                  <th>BIG 1 доба</th>
                  <th>BIG 2 доба</th>
                  <th>MAX BIG</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <p class="live-note">
            Учасники беруться з адмінки жеребкування (галочка BigFish Total).
          </p>
        </div>
      </div>

    </div>
  </section>
</main>

<footer class="footer">
  <div class="container footer__row">
    <div>© 2025 STOLAR CARP · Львів</div>
    <div class="footer__links">
      <a href="https://invite.viber.com/?g=8R04gUEhdVSnX6sr_DxGGGqAXTus0Ygh">Viber</a>
      <a href="https://youtube.com/@dk-stolarcarp?si=H-BUK2msCiKXdcA9">YouTube</a>
    </div>
  </div>
</footer>

<!-- Firebase compat -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
<script src="assets/js/firebase-init.js"></script>

<!-- Live читання -->
<script src="assets/js/live_firebase.js"></script>

<!-- BigFish Total -->
<script src="assets/js/bigfish_total_live.js"></script>

</body>
</html>
