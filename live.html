<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Live —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ ‚Äî STOLAR CARP</title>

  <link rel="stylesheet" href="assets/css/main.css">
  <script defer src="assets/js/config.js"></script>

  <style>
  /* ===== –í–µ—Ä—Ö–Ω—ñ–π –±–ª–æ–∫ ===== */
  .live-header{
    display:flex;
    flex-direction:column;
    gap:6px;
    margin-bottom:18px;
  }
  .live-kicker{
    display:inline-flex;
    align-items:center;
    gap:6px;
    font-size:12px;
    text-transform:uppercase;
    letter-spacing:.12em;
    color:#fcd34d;
    background:rgba(252,211,77,.08);
    border-radius:999px;
    padding:4px 10px;
    border:1px solid rgba(252,211,77,.35);
    width:fit-content;
  }
  .live-dot{
    width:8px;
    height:8px;
    border-radius:25%;
    background:#ef4444;
    box-shadow:0 0 10px rgba(239,68,68,.9);
  }
  .title-gradient{
    background:linear-gradient(90deg,#f6c34c 0%,#cc6a2b 35%,#7a0f2b 100%);
    -webkit-background-clip:text;
    background-clip:text;
    color:transparent;
  }
  .live-stage-pill{
    display:inline-flex;
    align-items:center;
    gap:8px;
    font-size:13px;
    color:var(--muted);
  }
  .live-stage-pill span{
    padding:4px 10px;
    border-radius:999px;
    border:1px solid #262636;
    background:#0d0d14;
    font-size:12px;
  }

  .bf-toggle{
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap:wrap;
    margin-top:10px;
  }
  .bf-toggle .btn{
    padding:8px 12px;
    border-radius:14px;
    font-size:13px;
  }

  /* ===== –ú–∞–∫–µ—Ç ===== */
  .live-layout{
    display:grid;
    grid-template-columns:1fr;
    gap:18px;
  }
  @media (min-width:980px){
    .live-layout{
      grid-template-columns:2fr 1.25fr;
    }
  }

  /* ===== –¢–∞–±–ª–∏—Ü—ñ (–±–∞–∑–∞) ===== */
  .table-wrap{
    overflow-x:auto;
    max-width:100%;
    -webkit-overflow-scrolling:touch;
  }

  .table-sm{
    font-size:7px;
    line-height:1.05;
  }
  .table-sm th,
  .table-sm td{
    padding:2px 2px;
    white-space:nowrap;
    text-align:center;
    vertical-align:middle;
    overflow:hidden;
    text-overflow:clip;
    font-variant-numeric: tabular-nums;
  }

  .live-note{
    font-size:11.5px;
    color:var(--muted);
    margin-top:6px;
  }

  /* ===== –ó–æ–Ω–∏ A / B / C ===== */
  .live-zones-grid{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:0;
  }
  @media (max-width:980px){
    .live-zones-grid{
      grid-template-columns:1fr;
    }
  }

  .live-zone.card{
    padding:6px 6px 4px;
    margin:0;
    border-radius:5px;
  }
  .live-zone-title{
    display:flex;
    align-items:center;
    justify-content:space-between;
    margin:4px 0;
  }
  .live-zone-title .badge{
    font-size:11px;
    padding:3px 8px;
  }

  .live-zone table.table{
    width:100%;
    table-layout:fixed;
    border-collapse:collapse;
  }

  .live-zone th,
  .live-zone td{
    font-size:7px !important;
    line-height:1.05 !important;
    padding:2px !important;
    text-align:center !important;
    vertical-align:middle !important;
    white-space:nowrap !important;
    overflow:hidden !important;
    text-overflow:clip !important;
    font-variant-numeric: tabular-nums;
  }

  .live-zone th:nth-child(1),
  .live-zone td:nth-child(1){ width:20px !important; }

  .live-zone th:nth-child(2),
  .live-zone td:nth-child(2){
    width:45px !important;
    text-align:left !important;
    padding-left:3px !important;
    text-overflow:ellipsis !important;
  }

  .live-zone th:nth-child(3),
  .live-zone td:nth-child(3),
  .live-zone th:nth-child(4),
  .live-zone td:nth-child(4),
  .live-zone th:nth-child(5),
  .live-zone td:nth-child(5),
  .live-zone th:nth-child(6),
  .live-zone td:nth-child(6){ width:40px !important; }

  .live-zone th:nth-child(7),
  .live-zone td:nth-child(7){
    width:23px !important;
    font-weight:700 !important;
  }

  .live-zone th:nth-child(8),
  .live-zone td:nth-child(8){ width:25px !important; }

  .live-zone th:nth-child(9),
  .live-zone td:nth-child(9){
    width:30px !important;
    font-weight:700 !important;
  }

  .live-zone th:nth-child(10),
  .live-zone td:nth-child(10){
    width:20px !important;
    font-weight:800 !important;
  }

  .live-left > .card{ padding:3px !important; }
  .live-left > .card:first-child{ border-radius:5px !important; }
  .live-left > .card:nth-child(2){ border-radius:5px !important; }

  /* ===================================================
     ‚úÖ –¢–ê–ë–õ–ò–¶–Ø –ó–í–ê–ñ–£–í–ê–ù–¨ (W1‚ÄìW4) ‚Äî –°–í–ê–ô–ü/–°–ö–†–û–õ (MOBILE)
     =================================================== */

  /* 1) –°—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω—ñ–∫–æ–ª–∏ –Ω–µ —à–∏—Ä—à–∞ –µ–∫—Ä–∞–Ω—É */
  html, body{ max-width:100%; overflow-x:hidden; }

  /* 2) –í–∞–∂–ª–∏–≤–æ: —ñ–Ω–∫–æ–ª–∏ main.css —Å—Ç–∞–≤–∏—Ç—å overflow:hidden –Ω–∞ card ‚Äî –∑–Ω—ñ–º–∞—î–º–æ —Å–∞–º–µ —Ç—É—Ç */
  .weigh-card{ overflow:visible !important; }

  /* 3) –°–∫—Ä–æ–ª/—Å–≤–∞–π–ø —Ç—ñ–ª—å–∫–∏ –≤ —Ü—å–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ */
  .table-wrap.weigh-scroll{
    width:100% !important;
    max-width:100% !important;
    display:block;
    overflow-x:auto !important;
    overflow-y:hidden !important;
    -webkit-overflow-scrolling:touch;
    touch-action: pan-x;
    overscroll-behavior-x: contain;
    padding-bottom:10px;
  }

  /* 4) –¢–∞–±–ª–∏—Ü—è –º–æ–∂–µ –±—É—Ç–∏ –¥—É–∂–µ —à–∏—Ä–æ–∫–∞ ‚Äî –∞–ª–µ —Ç—ñ–ª—å–∫–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
  #totalTable{
    border-collapse:separate;
    border-spacing:0;
    width:max-content !important;
    min-width:max-content !important;
    table-layout:auto !important;
  }

  /* 5) –ö–ª—ñ—Ç–∏–Ω–∫–∏ */
  #totalTable th,
  #totalTable td{
    font-size:7px !important;
    line-height:1.05 !important;
    padding:2px 2px !important;
    white-space:nowrap !important;
    text-align:center !important;
    vertical-align:middle !important;
    font-variant-numeric: tabular-nums;
    background:rgba(2,6,23,.35);
  }

  /* 6) Sticky: –ó–æ–Ω–∞ */
  #totalTable th:nth-child(1),
  #totalTable td:nth-child(1){
    position:sticky !important;
    left:0 !important;
    z-index:50 !important;
    width:28px !important;
    min-width:28px !important;
    background:#0d0d14 !important;
  }

  /* 7) Sticky: –ö–æ–º–∞–Ω–¥–∞ */
  #totalTable th:nth-child(2),
  #totalTable td:nth-child(2){
    position:sticky !important;
    left:28px !important;
    z-index:50 !important;
    width:60px !important;
    min-width:60px !important;
    background:#0d0d14 !important;
    text-align:left !important;
    padding-left:4px !important;
    overflow:hidden !important;
    text-overflow:ellipsis !important;
  }

  /* 8) –†–∏–±–∏: —à–∏—Ä–∏–Ω–∞ —Ç–∞–∫, —â–æ–± –Ω–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–º—É —Ç–µ–ª–µ—Ñ–æ–Ω—ñ –≤–ª–∞–∑–∏–ª–æ ~10‚Äì12 */
  #totalTable th:nth-child(n+3),
  #totalTable td:nth-child(n+3){
    width:22px !important;
    min-width:22px !important;
    max-width:22px !important;
  }

  /* 9) –í–∏–¥–∏–º–∏–π ‚Äú–±—ñ–≥—É–Ω–æ–∫‚Äù */
  .table-wrap.weigh-scroll::-webkit-scrollbar{ height:10px; }
  .table-wrap.weigh-scroll::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.25); border-radius:999px; }
  .table-wrap.weigh-scroll::-webkit-scrollbar-track{ background:rgba(255,255,255,.06); border-radius:999px; }
  </style>
</head>

<body class="live-page">

<header class="header">
  <div class="container header__row">
    <a class="logo" href="index.html">
      <span class="logo__mark">SC</span>
      <span class="logo__text">STOLAR CARP</span>
    </a>

    <nav class="nav" id="nav">
      <a href="index.html" class="nav__link">–ì–æ–ª–æ–≤–Ω–∞</a>
      <a href="rules.html" class="nav__link">–†–µ–≥–ª–∞–º–µ–Ω—Ç</a>
      <a href="register.html" class="nav__link">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</a>
      <a href="live.html" class="nav__link nav__link--active">Live</a>
      <a href="rating.html" class="nav__link">–†–µ–π—Ç–∏–Ω–≥</a>
      <a href="lakes.html" class="nav__link">–í–æ–¥–æ–π–º–∏</a>
      <a href="sponsors.html" class="nav__link">–°–ø–æ–Ω—Å–æ—Ä–∏</a>
      <a href="events/index.html" class="nav__link">–ê—Ä—Ö—ñ–≤</a>
      <a href="/cabinet.html" class="nav__link" id="cabinetLink">–ú—ñ–π –∫–∞–±—ñ–Ω–µ—Ç</a>
    </nav>

    <button class="burger" id="burger" type="button"><span></span><span></span><span></span></button>
  </div>
</header>

<main class="main">
  <section class="container section">

    <div class="live-header">
      <div class="live-kicker">
        <span class="live-dot"></span>
        <span>Live –ø—Ä–æ—Ç–æ–∫–æ–ª</span>
      </div>

      <h1 class="title-gradient">–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–º–∞–≥–∞–Ω—å</h1>

      <div class="live-stage-pill">
        <span>–ó–º–∞–≥–∞–Ω–Ω—è: <strong id="liveStageName">‚Äî</strong></span>
      </div>

      <div class="bf-toggle">
        <button class="btn btn--accent" id="toggleBigFishBtn" type="button">BigFish Total</button>
        <span class="pill" id="liveUpdatedAt">–û–Ω–æ–≤–ª–µ–Ω–æ: ‚Äî</span>
      </div>

      <div class="card bf-wrap" id="bigFishWrap">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;">
          <h2 style="margin:0;">BigFish ‚Äî Total</h2>
          <span class="pill" id="bfCount">–£—á–∞—Å–Ω–∏–∫—ñ–≤: ‚Äî</span>
        </div>

        <div class="table-wrap" style="margin-top:10px;">
          <table class="table table-sm" id="bigFishTable">
            <thead>
              <tr>
                <th>–ö–æ–º–∞–Ω–¥–∞</th>
                <th>BIG 1 –¥–æ–±–∞</th>
                <th>BIG 2 –¥–æ–±–∞</th>
                <th>MAX BIG</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <p class="lead" style="max-width:720px;margin-top:10px;">
        W = <b>–∫-—Å—Ç—å / –≤–∞–≥–∞</b> –î–∞–Ω—ñ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
      </p>
    </div>

    <div id="liveError" class="form-msg err" style="display:none;"></div>
    <div id="liveLoading" class="form__hint" style="margin-top:12px;">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>

    <div id="liveContent" class="live-layout" style="display:none;">
      <div class="live-left">
        <div class="card" style="margin-bottom:16px;">
          <h2 style="margin-top:0;">–ó–æ–Ω–∏ A / B / C</h2>
          <div class="live-zones-grid" id="zonesContainer"></div>
          <p class="live-note">–ú—ñ—Å—Ü—è —É –∑–æ–Ω—ñ.</p>
        </div>

        <div class="card weigh-card">
          <h2 style="margin-top:0;">–¢–∞–±–ª–∏—Ü—è –∑–≤–∞–∂—É–≤–∞–Ω—å</h2>

          <div class="bf-toggle" style="margin-top:18px;margin-bottom:12px">
            <button class="btn btn--accent" id="wBtn1" type="button">W1</button>
            <button class="btn btn--ghost"  id="wBtn2" type="button">W2</button>
            <button class="btn btn--ghost"  id="wBtn3" type="button">W3</button>
            <button class="btn btn--ghost"  id="wBtn4" type="button">W4</button>
            <span id="weighInfo" class="form__hint" style="margin-left:auto;">–ø–µ—Ä–µ–≥–ª—è–¥ –∑–≤–∞–∂—É–≤–∞–Ω–Ω—è</span>
          </div>

          <!-- ‚úÖ –í–ê–ñ–õ–ò–í–û: id –¥–ª—è —Å–≤–∞–π–ø—É -->
          <div class="table-wrap weigh-scroll" id="weighScroll">
            <table class="table table-sm" id="totalTable">
              <thead>
                <tr>
                  <th>–ó–æ–Ω–∞</th>
                  <th>–ö–æ–º–∞–Ω–¥–∞</th>
                  <th>üêü</th>
                  <th>üêü</th>
                  <th>üêü</th>
                  <th>üêü</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

        </div>
      </div>
    </div>

  </section>
</main>

<footer class="footer">
  <div class="container footer__row">
    <div>¬© 2025 STOLAR CARP ¬∑ –õ—å–≤—ñ–≤</div>
    <div class="footer__links">
      <a href="https://invite.viber.com/?g=8R04gUEhdVSnX6sr_DxGGGqAXTus0Ygh">Viber</a>
      <a href="https://youtube.com/@dk-stolarcarp">YouTube</a>
    </div>
  </div>
</footer>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<script src="assets/js/firebase-init.js"></script>
<script src="assets/js/live_firebase.js"></script>
<script src="assets/js/bigfish_total_live.js"></script>

<script>
  document.getElementById("toggleBigFishBtn")?.addEventListener("click", () => {
    document.getElementById("bigFishWrap")?.classList.toggle("is-open");
  });

  (function(){
    const a = document.getElementById("cabinetLink");
    if (a) a.setAttribute("href", "/cabinet.html");
  })();

  /* ===================================================
     ‚úÖ –†–ï–ê–õ–¨–ù–ò–ô –°–í–ê–ô–ü (DRAG) –î–õ–Ø –¢–ê–ë–õ–ò–¶–Ü –ó–í–ê–ñ–£–í–ê–ù–¨
     - —Ç—è–≥–Ω–µ—à –ø–∞–ª—å—Ü–µ–º –≤–ª—ñ–≤–æ/–≤–ø—Ä–∞–≤–æ -> scrollLeft
     - –ø—Ä–∞—Ü—é—î –Ω–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–º—É —Ç–µ–ª–µ—Ñ–æ–Ω—ñ
     =================================================== */
  (function(){
    const wrap = document.getElementById("weighScroll");
    if (!wrap) return;

    let isDown = false;
    let startX = 0;
    let startScrollLeft = 0;

    const getX = (e) => (e.touches ? e.touches[0].clientX : e.clientX);

    const onDown = (e) => {
      isDown = true;
      startX = getX(e);
      startScrollLeft = wrap.scrollLeft;
      // —â–æ–± –Ω–µ –±—É–ª–æ "–≤–∏–¥—ñ–ª–µ–Ω–Ω—è" —Ç–µ–∫—Å—Ç—É –ø—ñ–¥ –ø–∞–ª—å—Ü–µ–º
      wrap.classList.add("dragging");
    };

    const onMove = (e) => {
      if (!isDown) return;
      const x = getX(e);
      const dx = x - startX;
      wrap.scrollLeft = startScrollLeft - dx;
      // –∫–æ–ª–∏ —Ç—è–≥–Ω–µ–º–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ ‚Äî –≥–ª—É—à–∏–º–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–µ –ø—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—è
      if (e.cancelable) e.preventDefault();
    };

    const onUp = () => {
      isDown = false;
      wrap.classList.remove("dragging");
    };

    // touch
    wrap.addEventListener("touchstart", onDown, {passive:true});
    wrap.addEventListener("touchmove", onMove, {passive:false});
    wrap.addEventListener("touchend", onUp, {passive:true});

    // mouse (–Ω–∞ –ü–ö)
    wrap.addEventListener("mousedown", onDown);
    window.addEventListener("mousemove", onMove, {passive:false});
    window.addEventListener("mouseup", onUp);

  })();
</script>

</body>
</html>
